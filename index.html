<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>For Manu</title>
<meta name="theme-color" content="#000000" />
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@500;700&family=Inter:wght@300;500;700&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#000; --ink:#e8e8f2; --dim:#8b8b9a;
    --violet:#7a4cff; --rose:#ff3b81; --glow:0 0 36px rgba(122,76,255,.35);
  }
  *{box-sizing:border-box} html,body{height:100%}
  body{
    margin:0; color:var(--ink);
    font-family:Inter,system-ui,Segoe UI,Roboto;
    background:radial-gradient(1200px 800px at 70% -10%, #0b0b16 0%, #06060a 40%, #000 100%), #000;
    overflow:hidden;
  }
  .sky, .sparks { position:fixed; inset:0; pointer-events:none }
  .sky{
    background:
      radial-gradient(1px 1px at 20% 30%, #fff8 50%, transparent 51%) repeat,
      radial-gradient(1px 1px at 80% 70%, #fff6 50%, transparent 51%) repeat,
      radial-gradient(1px 1px at 50% 10%, #fff7 50%, transparent 51%) repeat;
    background-size: 600px 400px, 700px 500px, 800px 600px;
    opacity:.5; animation: twinkle 8s linear infinite;
  }
  @keyframes twinkle{ 50%{opacity:.7} }
  .moon{
    position:fixed;width:160px;height:160px;border-radius:50%;
    box-shadow:0 0 60px 10px #b7b7ff44 inset, 0 0 120px 10px #b7b7ff22;
    background:radial-gradient(circle at 30% 30%, #d8d8ff 5%, #bdbdf7 30%, #5b5b8a 65%, #1a1a2b 100%);
    top:60px; right:60px; opacity:.25; filter:grayscale(.2)
  }
  .raven{
    position:fixed; left:8%; top:14%; width:120px; height:90px; opacity:.12;
    filter:drop-shadow(0 0 22px rgba(0,0,0,.6));
  }
  .raven .body{ position:absolute; left:40px; top:26px; width:42px; height:32px; background:#0a0a0f; border-radius:26px 18px 12px 18px }
  .raven .wing{ position:absolute; top:10px; width:58px; height:38px; background:#0a0a0f; border-radius:6px 50px 6px 50px; transform-origin:right center; animation:flap 4.2s ease-in-out infinite }
  .raven .wing.left{ left:-2px; transform:rotate(8deg) }
  .raven .wing.right{ right:-14px; transform:rotate(-8deg); animation-delay:1.1s }
  @keyframes flap{ 0%,100%{ transform:rotate(6deg) } 50%{ transform:rotate(-12deg) } }

  main{
    position:relative; z-index:2; max-width:860px; margin:12vh auto; padding:0 16px;
  }
  .card{
    background:linear-gradient(180deg, rgba(15,15,24,.82), rgba(8,8,12,.92));
    border:1px solid #1d1d27; border-radius:22px; padding:28px;
    box-shadow:var(--glow), 0 20px 60px rgba(0,0,0,.6); backdrop-filter:blur(6px);
  }
  h1{ font-family:Cinzel,serif; margin:0 0 10px; color:#eef; letter-spacing:.06em; text-align:center }
  .subtitle{ text-align:center; color:var(--dim); margin:0 0 8px; font-size:.98rem }
  .timer{ text-align:center; color:#cfcff5; margin:10px 0 4px; font-weight:600 }
  .progress{
    height:8px; width:100%; background:#12121b; border-radius:999px; overflow:hidden; margin:8px 0 18px;
    border:1px solid #232334;
  }
  .bar{ height:100%; width:0%; background:linear-gradient(90deg, var(--violet), var(--rose)); transition:width .6s ease }
  .q{
    display:none; opacity:0; transform:translateY(10px);
    transition:opacity .45s ease, transform .45s ease;
  }
  .q.show{ display:block; opacity:1; transform:translateY(0) }
  .prompt{ font-size:1.1rem; margin:8px 0 16px; line-height:1.6 }
  .choices{ display:flex; gap:10px; flex-wrap:wrap }
  .btn{
    appearance:none; border:1px solid #2a2a3b; background:#0c0c12; color:#f5f5ff; padding:10px 14px;
    border-radius:12px; cursor:pointer; transition:transform .15s ease, box-shadow .2s ease, background .2s ease;
    font-weight:600;
  }
  .btn:hover{ transform:translateY(-1px) }
  .primary{ background:linear-gradient(135deg, var(--violet), var(--rose)) }
  .nav{ display:flex; justify-content:space-between; margin-top:16px }
  .muted{ color:var(--dim); font-size:.95rem }
  .center{ text-align:center }
  .hidden{ display:none }
  .sparks{ background: radial-gradient(120px 60px at var(--x,50%) var(--y,50%), rgba(255,59,129,.15), transparent 70%) }
  footer{ text-align:center; color:#8a8a8a; font-size:.9rem; margin:18px 0 }
  @media (max-width:560px){ main{ margin:10vh auto } .card{ padding:22px } }
</style>
</head>
<body>
  <div class="sky"></div>
  <div class="moon"></div>
  <div class="sparks" id="sparks"></div>
  <div class="raven"><div class="wing left"></div><div class="body"></div><div class="wing right"></div></div>

  <main>
    <div class="card">
      <h1>For Manu</h1>
      <p class="subtitle">A short night-walk of questions under raven wings.</p>

      <div class="timer"><span id="timeLeft">10:00</span> left</div>
      <div class="progress"><div class="bar" id="bar"></div></div>

      <section id="qWrap"></section>

      <div class="nav">
        <button class="btn" id="backBtn" disabled>Back</button>
        <div>
          <button class="btn" id="musicBtn">Play ambience</button>
          <button class="btn primary" id="nextBtn">Next</button>
        </div>
      </div>

      <p class="muted center" id="hint">Touch anywhere to leave a little starlight.</p>
    </div>
    <footer>For the girl whose smile turns darkness into art.</footer>
  </main>

  <!-- Optional ultra‑light ambience (royalty-free pad hosted via Google Drive redirect-free sources are unreliable; this uses a simple oscillator) -->
  <audio id="amb" class="hidden"></audio>

<script>
/* Quiz data: about 8–10 questions, final is proposal. Total run ~5–10 min depending on reading. */
const questions = [
  {
    text: "If we had a midnight walk in Delhi, what would you hold—my hand, my arm, or my heart?",
    type: "choice",
    options: ["Your hand", "Your arm", "Your heart"]
  },
  {
    text: "Pick our first stop under the night sky.",
    type: "choice",
    options: ["Quiet park bench", "Rooftop view", "Empty street with chai"]
  },
  {
    text: "What should our raven bring—a message, a memory, or a kiss on the forehead?",
    type: "choice",
    options: ["A message", "A memory", "A forehead kiss"]
  },
  {
    text: "Touch test: press and hold the button for a heartbeat to tell me you’re here.",
    type: "hold"
  },
  {
    text: "Choose our snack for the night.",
    type: "choice",
    options: ["Cheeseburgers", "Farmhouse pizza", "Both, obviously"]
  },
  {
    text: "How should I say your name?",
    type: "choice",
    options: ["Soft and slow", "In your ear", "With a smile you can feel"]
  },
  {
    text: "If love was a color tonight, which shade of black would you wear?",
    type: "choice",
    options: ["Velvet black", "Ink black", "Moon-shadow black"]
  },
  {
    text: "Close your eyes for 5 seconds and imagine my hand in yours. Ready to continue?",
    type: "confirm"
  },
  {
    text: "Final question: Will you be mine, not just tonight, but forever?",
    type: "final"
  }
];

const state = {
  i: 0,
  answers: [],
  durationSec: 10 * 60, // 10 minutes
  startedAt: Date.now(),
};

const qWrap = document.getElementById('qWrap');
const nextBtn = document.getElementById('nextBtn');
const backBtn = document.getElementById('backBtn');
const timeLeftEl = document.getElementById('timeLeft');
const bar = document.getElementById('bar');
const sparks = document.getElementById('sparks');
const musicBtn = document.getElementById('musicBtn');
const amb = document.getElementById('amb');

function mmss(s){
  const m = Math.max(0, Math.floor(s/60));
  const sec = Math.max(0, Math.floor(s%60));
  return `${String(m).padStart(2,'0')}:${String(sec).padStart(2,'0')}`;
}

function updateTimer(){
  const elapsed = Math.floor((Date.now() - state.startedAt)/1000);
  const remain = Math.max(0, state.durationSec - elapsed);
  timeLeftEl.textContent = mmss(remain);
  if(remain === 0){
    // Auto-jump to final if time runs out
    state.i = questions.length - 1;
    render();
    clearInterval(timerInterval);
  }
}
let timerInterval = setInterval(updateTimer, 1000); updateTimer();

function render(){
  qWrap.innerHTML = "";
  backBtn.disabled = state.i === 0;
  const q = questions[state.i];
  const total = questions.length;
  bar.style.width = `${((state.i)/ (total-1))*100}%`;

  const sec = document.createElement('section');
  sec.className = 'q show';

  const p = document.createElement('p');
  p.className = 'prompt';
  p.textContent = q.text;
  sec.appendChild(p);

  if(q.type === "choice"){
    const box = document.createElement('div'); box.className='choices';
    q.options.forEach(opt=>{
      const b = document.createElement('button');
      b.className = 'btn';
      b.textContent = opt;
      b.onclick = ()=>{ state.answers[state.i]=opt; next(); };
      box.appendChild(b);
    });
    sec.appendChild(box);
  }
  else if(q.type === "hold"){
    const b = document.createElement('button');
    b.className = 'btn';
    b.textContent = 'Touch & Hold';
    let t;
    const start = ()=>{ b.classList.add('primary'); t=setTimeout(()=>{ state.answers[state.i]='held'; next(); }, 1000); };
    const stop = ()=>{ b.classList.remove('primary'); clearTimeout(t); };
    b.addEventListener('mousedown', start);
    b.addEventListener('mouseup', stop);
    b.addEventListener('mouseleave', stop);
    b.addEventListener('touchstart', e=>{ e.preventDefault(); start(); }, {passive:false});
    b.addEventListener('touchend', e=>{ e.preventDefault(); stop(); }, {passive:false});
    sec.appendChild(b);
  }
  else if(q.type === "confirm"){
    const box = document.createElement('div'); box.className='choices';
    const yes = document.createElement('button'); yes.className='btn primary'; yes.textContent='Yes'; yes.onclick=()=>{ state.answers[state.i]='yes'; next(); };
    const need = document.createElement('button'); need.className='btn'; need.textContent='Give me a sec'; need.onclick=()=>{ state.answers[state.i]='pause'; setTimeout(()=>next(), 3000); };
    box.appendChild(yes); box.appendChild(need); sec.appendChild(box);
  }
  else if(q.type === "final"){
    const box = document.createElement('div'); box.className='choices';
    const yes = document.createElement('a'); yes.className='btn primary'; yes.textContent='Yes, forever';
    yes.href = 'https://api.whatsapp.com/send?text=Yes%20%F0%9F%92%99%20Forever.';
    yes.target='_blank'; yes.rel='noopener';
    const talk = document.createElement('a'); talk.className='btn'; talk.textContent='Let’s talk';
    talk.href = 'https://api.whatsapp.com/send?text=Let%E2%80%99s%20talk%20about%20forever%20%F0%9F%92%AD';
    talk.target='_blank'; talk.rel='noopener';
    box.appendChild(yes); box.appendChild(talk);
    const note = document.createElement('p'); note.className='center muted'; note.textContent='If love is a code, you are the only key it accepts.';
    sec.appendChild(box); sec.appendChild(note);
    nextBtn.disabled = true; // end
  } else {
    // fallback
  }

  qWrap.appendChild(sec);
}
render();

function next(){
  if(state.i < questions.length - 1){
    state.i++;
    render();
  }
}
function back(){
  if(state.i > 0){
    state.i--;
    nextBtn.disabled = false;
    render();
  }
}
nextBtn.addEventListener('click', next);
backBtn.addEventListener('click', back);

// Soft “glance” sparkles where the user taps/clicks
let sparkTimer;
document.addEventListener('pointerdown', e=>{
  clearTimeout(sparkTimer);
  const x = (e.clientX / window.innerWidth) * 100;
  const y = (e.clientY / window.innerHeight) * 100;
  sparks.style.setProperty('--x', x+'%');
  sparks.style.setProperty('--y', y+'%');
  sparks.style.opacity = '1';
  sparkTimer = setTimeout(()=>{ sparks.style.opacity='0'; }, 500);
});

// Super-simple ambience using WebAudio (a gentle pad)
let audioCtx, osc, gain;
musicBtn.addEventListener('click', ()=>{
  if(!audioCtx){
    audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    osc = audioCtx.createOscillator();
    gain = audioCtx.createGain();
    osc.type = 'sine';
    osc.frequency.value = 174; // soft solfeggio-like tone
    gain.gain.value = 0.02;
    osc.connect(gain).connect(audioCtx.destination);
    osc.start();
    musicBtn.textContent = 'Pause ambience';
  } else if(audioCtx.state === 'running'){
    audioCtx.suspend(); musicBtn.textContent = 'Play ambience';
  } else {
    audioCtx.resume(); musicBtn.textContent = 'Pause ambience';
  }
});
</script>
</body>
</html>
